# ุชุญููู ูุฎุงุทุฑ ุณูุฑูุจุชุงุช ุงูุฅุตูุงุญ ูุงููุญุต ูุงูุงุณุชุนุงุฏุฉ ๐จ

## ููุฏูุฉ
ูุฐุง ุงูุชูุฑูุฑ ููุถุญ ุณูุฑูุจุชุงุช ุงูุตูุงูุฉ ุงูุฎุทุฑุฉ ุงูููุฌูุฏุฉ ูู ุงููุธุงู ูููุงููุง ูุงููุฎุงุทุฑ ุงููุฑุชุจุทุฉ ุจูุง.

## ๐ด ุงูุณูุฑูุจุชุงุช ุนุงููุฉ ุงูุฎุทูุฑุฉ

### 1. ุณูุฑูุจุช ุฅุนุงุฏุฉ ุชุนููู ูุงุนุฏุฉ ุงูุจูุงูุงุช - `reset_db.js`
**ุงููููุฉ:**
- ุญุฐู ุฌููุน ุงูุฌุฏุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅุนุงุฏุฉ ุฅูุดุงุก ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงูุตูุฑ
- ูุฒุงููุฉ ุงูููุงุฐุฌ ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงููุฎุงุทุฑ ุงููุจุฑู:** ๐จ
```javascript
await db.sequelize.drop(); // ุญุฐู ุฌููุน ุงูุจูุงูุงุช ููุงุฆูุงู!
```
- **ููุฏุงู ุฏุงุฆู ููุจูุงูุงุช**: ูุญุฐู ุฌููุน ุจูุงูุงุช ุงูุทูุงุจ ูุงููุนูููู ูุงูุฌุฏุงูู
- **ุนุฏู ูุฌูุฏ ูุณุฎ ุงุญุชูุงุทูุฉ**: ูุง ูุฃุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุงูุญุฐู
- **ุชุดุบูู ูุจุงุดุฑ**: ูุชู ุงูุชูููุฐ ููุฑุงู ุฏูู ุชุฃููุฏ
- **ูุง ูููู ุงูุชุฑุงุฌุน**: ุงูุนูููุฉ ุบูุฑ ูุงุจูุฉ ููุนูุณ

### 2. ุณูุฑูุจุช ุฅุตูุงุญ ุฃูุณุงู ุงูุทูุงุจ - `repair_student_sections.js`
**ุงููููุฉ:**
- ูุฑุงุกุฉ ูููุงุช Excel ูู ูุฌูุฏ "ููุงุฆุญ ุงูุชูุงููุฐ ูููุตูุฉ"
- ุฑุจุท ุงูุทูุงุจ ุจุฃูุณุงููู ุจุงุณุชุฎุฏุงู ุฑูุฒ ุงููุณุงุฑ
- ุฅูุดุงุก ุฃูุณุงู ุฌุฏูุฏุฉ ุชููุงุฆูุงู ุฅุฐุง ูู ุชูุฌุฏ

**ุงููุฎุงุทุฑ ุงููุชูุณุทุฉ:** โ๏ธ
```javascript
// ุฅูุดุงุก ูุณู ุฌุฏูุฏ ุชููุงุฆูุงู
const created = await Section.create({ 
  id: Date.now().toString(), // ูุนุฑู ุบูุฑ ุขูู!
  name: sectionName 
});
```
- **ุชุนุฏูู ุจูุงูุงุช ุฅูุชุงุฌ ูุจุงุดุฑุฉ**: ูุบูุฑ sectionId ููุฆุงุช ุงูุทูุงุจ
- **ุฅูุดุงุก ุฃูุณุงู ุนุดูุงุฆูุฉ**: ููุดุฆ ุฃูุณุงู ุฌุฏูุฏุฉ ุจุฏูู ุชุญูู
- **ูุนุฑูุงุช ุบูุฑ ุขููุฉ**: ูุณุชุฎุฏู Date.now() ููุนุฑู ูุฑูุฏ
- **ูุง ููุฌุฏ ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช**: ูุซู ุจุฃุณูุงุก ุงููููุงุช

### 3. ุณูุฑูุจุช ุชุตุญูุญ ุฃูุงู ุงูุฌุฏูู - `fix_schedule_days.js`
**ุงููููุฉ:**
- ุชุญููู ุฃุณูุงุก ุงูุฃูุงู ูู ุงูุฅูุฌููุฒูุฉ ุฅูู ุงูุนุฑุจูุฉ
- ุชุญุฏูุซ ุฌุฏูู ุงูููุงุนูุฏ ุงูุฅุฏุงุฑูุฉ

**ุงููุฎุงุทุฑ ุงูููุฎูุถุฉ:** ๐ก
```javascript
await entry.update({ day: arabicDay }); // ุชุบููุฑ ูุจุงุดุฑ
```
- **ุชุญุฏูุซ ูุจุงุดุฑ ููุฅูุชุงุฌ**: ูุบูุฑ ุจูุงูุงุช ุงูุฌุฏูู ุงูุฒููู ูุจุงุดุฑุฉ
- **ุนุฏู ูุฌูุฏ ูุณุฎุฉ ุงุญุชูุงุทูุฉ**: ูุง ูุญูุธ ุงูููู ุงููุฏููุฉ
- **ูุฑุถูุงุช ุฎุงุทุฆุฉ**: ูุฏ ูุบูุฑ ุฃูุงูุงู ุตุญูุญุฉ

### 4. ุณูุฑูุจุช ุงูุชุฑุญูู ุงููุฏูู - `manual_migration.js`
**ุงููููุฉ:**
- ุฅุถุงูุฉ ุนููุฏ sectionId ุฌุฏูุฏ
- ุฑุจุท ุงูุฌุฏุงูู ุจุงูุฃูุณุงู
- ุญุฐู ุงูุฅุฏุฎุงูุงุช ุงููุชููุฉ
- ุญุฐู ุนููุฏ sectionName ุงููุฏูู

**ุงููุฎุงุทุฑ ุงูุนุงููุฉ:** ๐ด
```javascript
// ุญุฐู ุงูุฅุฏุฎุงูุงุช ุงููุชููุฉ
await AdministrativeTimetableEntry.destroy({
  where: { sectionId: null }
});

// ุญุฐู ุงูุนููุฏ ุงููุฏูู ููุงุฆูุงู
await queryInterface.removeColumn('administrative_timetable', 'sectionName');
```
- **ููุฏุงู ุฏุงุฆู ููุจูุงูุงุช**: ูุญุฐู ุฅุฏุฎุงูุงุช ุงูุฌุฏูู ุงูุฒููู ุงููุชููุฉ
- **ุชุบููุฑ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ูุบูุฑ ูู ุจููุฉ ุงูุฌุฏุงูู
- **ุนุฏู ูุงุจููุฉ ุงูุฅุฑุฌุงุน**: ุญุฐู ุงูุฃุนูุฏุฉ ุบูุฑ ูุงุจู ููุชุฑุงุฌุน
- **ูุดู ูุชุชุงูู**: ุฅุฐุง ูุดู ูู ููุชุตู ุงูุนูููุฉ ููุณุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 5. ุณูุฑูุจุช ุงุณุชุนุงุฏุฉ ุงูุฌุฏูู - `restore_schedule.js`
**ุงููููุฉ:**
- ูุฑุงุกุฉ ุฌุฏูู ุฒููู ูู ููู CSV
- ุฅูุดุงุก ุฅุฏุฎุงูุงุช ุฌุฏูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุทุงุจูุฉ ุฃุณูุงุก ุงูุฃูุณุงู ูุน ุงูููุฌูุฏ

**ุงููุฎุงุทุฑ ุงููุชูุณุทุฉ:** โ๏ธ
```javascript
await AdminScheduleEntry.create({
  id: Date.now().toString() + Math.random().toString().substr(2, 5), // ูุนุฑู ุบูุฑ ุขูู
  sectionId: sectionId,
  // ... ุจุงูู ุงูุจูุงูุงุช
});
```
- **ุชุถุงุฑุจ ุงูุจูุงูุงุช**: ูุฏ ููุดุฆ ุฌุฏููุงู ููุฑุฑุงู
- **ูุนุฑูุงุช ุบูุฑ ุขููุฉ**: ูุณุชุฎุฏู ุชุงุฑูุฎ + ุนุดูุงุฆู ููุนุฑู
- **ุนุฏู ุงูุชุญูู ูู ุงูุชุถุงุฑุจ**: ูุง ููุญุต ุงูุฌุฏุงูู ุงูููุฌูุฏุฉ
- **ุซูุฉ ุนููุงุก ุจููู CSV**: ูุซู ุจุตุญุฉ ุงูุจูุงูุงุช ุงูุฎุงุฑุฌูุฉ

## ๐ ุณูุฑูุจุชุงุช ุงููุญุต - ูุฎุงุทุฑ ููุฎูุถุฉ ููู ูููุฉ

### ุณูุฑูุจุชุงุช ุงููุญุต ุงูููุฌูุฏุฉ:
- `check_data_simple.js` - ูุญุต ุฃุณุงุณู ููุจูุงูุงุช
- `check_students.js` - ูุญุต ุจูุงูุงุช ุงูุทูุงุจ
- `check_evaluation_tables.js` - ูุญุต ุฌุฏุงูู ุงูุชูููู
- `check_att_schema.js` - ูุญุต ูุฎุทุท ุงูุญุถูุฑ
- `check_admin_tables.js` - ูุญุต ุงูุฌุฏุงูู ุงูุฅุฏุงุฑูุฉ

**ุงููุฎุงุทุฑ ุงููุญุชููุฉ ูููุญุต:**
- **ุงุณุชููุงู ุงูููุงุฑุฏ**: ูุฏ ุชุณุชููู CPU ุนุงูู ุฃุซูุงุก ุงููุญุต
- **ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ูุฏ ุชุจุทุฆ ุงูุนูููุงุช ุงูุฃุฎุฑู
- **ูุนูููุงุช ุญุณุงุณุฉ**: ูุฏ ุชุนุฑุถ ุจูุงูุงุช ุญุณุงุณุฉ ูู ุงููููุงุช

## ๐ก๏ธ ุงูุชูุตูุงุช ุงูุฃูููุฉ

### 1. ููุณูุฑูุจุชุงุช ุนุงููุฉ ุงูุฎุทูุฑุฉ:
```javascript
// ุฅุถุงูุฉ ุญูุงูุฉ ูุจู ุงูุชูููุฐ
const readline = require('readline');

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

console.log('โ๏ธ ุชุญุฐูุฑ: ูุฐุง ุงูุณูุฑูุจุช ุณูุญุฐู ุฌููุน ุงูุจูุงูุงุช!');
rl.question('ุงูุชุจ "ูุนู ุฃุฑูุฏ ุงูุญุฐู" ูููุชุงุจุนุฉ: ', (answer) => {
  if (answer !== 'ูุนู ุฃุฑูุฏ ุงูุญุฐู') {
    console.log('โ ุชู ุฅูุบุงุก ุงูุนูููุฉ');
    process.exit(0);
  }
  // ูุชุงุจุนุฉ ุงูุชูููุฐ...
});
```

### 2. ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ:
```javascript
// ุฃุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุฃู ุชุนุฏูู ุฎุทุฑ
const backup = require('./services/backup');
await backup.createBackup(`before_${scriptName}_${Date.now()}`);
```

### 3. ูุถุน ุงูุชุทููุฑ ุงููููุตู:
```javascript
// ุงูุชุญูู ูู ุงูุจูุฆุฉ
if (process.env.NODE_ENV === 'production') {
  console.log('โ ูุง ูููู ุชุดุบูู ูุฐุง ุงูุณูุฑูุจุช ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ');
  process.exit(1);
}
```

### 4. ุชุณุฌูู ุงูุนูููุงุช:
```javascript
// ุชุณุฌูู ุฌููุน ุงูุชุบููุฑุงุช
const auditLog = {
  timestamp: new Date(),
  script: __filename,
  action: 'data_modification',
  affectedRecords: count,
  user: process.env.USER
};
await AuditLog.create(auditLog);
```

## ๐จ ุฎุทุฉ ุงูุทูุงุฑุฆ

### ูู ุญุงูุฉ ุชุดุบูู ุณูุฑูุจุช ุฎุทุฑ ุจุงูุฎุทุฃ:
1. **ุฅููุงู ููุฑู**: `Ctrl+C` ุฃู ูุชู ุงูุนูููุฉ
2. **ุงุณุชุนุงุฏุฉ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ**: ุฅุฐุง ูุงูุช ููุฌูุฏุฉ
3. **ูุญุต ุงูุฃุถุฑุงุฑ**: ุชุดุบูู ุณูุฑูุจุชุงุช ุงููุญุต
4. **ุฅุนุงุฏุฉ ุงูุจูุงุก**: ูู ุขุฎุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุณูููุฉ

### ุฎุท ุงูุฏูุงุน ุงูุฃูู:
```bash
# ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ ููุฑูุฉ ูุจู ุฃู ุณูุฑูุจุช
cp classroom.db classroom_backup_$(date +%Y%m%d_%H%M%S).db
```

## ๐ ุฅุญุตุงุฆูุงุช ุงููุฎุงุทุฑ

| ููุน ุงูุณูุฑูุจุช | ุนุฏุฏ ุงููููุงุช | ูุณุชูู ุงูุฎุทุฑ | ุชุฃุซูุฑ ุงูุจูุงูุงุช |
|---------------|-------------|-------------|----------------|
| Reset/Drop | 1 | ๐ด ุญุฑุฌ | ููุฏุงู ูุงูู |
| Migration | 3 | ๐ด ุนุงูู | ุชุบููุฑ ููููู |
| Repair | 5 | ๐ ูุชูุณุท | ุชุนุฏูู ุจูุงูุงุช |
| Check | 15+ | ๐ก ููุฎูุถ | ูุฑุงุกุฉ ููุท |

## ุงูุฎูุงุตุฉ
ูุฐู ุงูุณูุฑูุจุชุงุช ุถุฑูุฑูุฉ ููุตูุงูุฉ ููููุง ุชุดูู ูุฎุงุทุฑ ุฌุณููุฉ ุฅุฐุง ุชู ุชุดุบูููุง ุจุฏูู ุญุฐุฑ. ูุฌุจ:
- ุฅุถุงูุฉ ุขููุงุช ุญูุงูุฉ
- ุฃุฎุฐ ูุณุฎ ุงุญุชูุงุทูุฉ ูุจู ุงูุชุดุบูู
- ุงุฎุชุจุงุฑ ุงูุณูุฑูุจุชุงุช ูู ุจูุฆุฉ ุชุทููุฑ ุฃููุงู
- ุฅุถุงูุฉ ุชุณุฌูู ููุตู ููุนูููุงุช
- ูุถุน ุถูุงุจุท ูููุตูู ููุฐู ุงูุณูุฑูุจุชุงุช