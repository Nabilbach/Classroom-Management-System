# ุชูุฑูุฑ ุงูุฅุทูุงู ุงูููุงุฆู - ุดุจูุฉ ุงูุชูููู ูุน RTL ูุงููููุงุณ 0-10

## ๐ ุงูููุฎุต ุงูุชูููุฐู

ุชู ุฅููุงู ุชุทุจูู ุดุงูู ููุธุงู ุดุจูุฉ ุงูุชูููู ูุน ุฏุนู ุงููุต ูู ุงููููู ุฅูู ุงููุณุงุฑ (RTL) ูุงููููุงุณ ุงููุญุฏุซ ูู 0 ุฅูู 10. ุฌููุน ุงููุชุทูุจุงุช ูุฏ ุชู ุชูููุฐูุง ุจูุฌุงุญ.

---

## โ ุงูููุงู ุงูููุฌุฒุฉ

### 1. ุชุญุฏูุซ ุงููููุงุณ ูู 0-20 ุฅูู 0-10 โ
**ุงููููุงุช ุงููุนุฏูุฉ:**
- `backend/index.js`:
  - ุฏุงูุฉ `normalizeTo20` โ `normalizeTo10` ูู endpoint JSON
  - ุฏุงูุฉ `normalizeTo20` โ `normalizeTo10` ูู endpoint Excel
  - ุชุตุญูุญ `scaleFactor` ูู `20 / sumMax` ุฅูู `10 / sumMax`
  - ุชุญุฏูุซ ุญุฏ ุงูููุทุฉ ุงูููุงุฆูุฉ ูู 20 ุฅูู 10

### 2. ุฅุถุงูุฉ Endpoint PDF โ
**ุงูููู:** `backend/index.js`
**ุงูููุฒุงุช:**
- `GET /api/sections/:sectionId/assessment-grid.pdf`
- ุฏุนู ูุงูู ููุนุฑุจูุฉ ูRTL
- ุฌุฏูู ููุณู ูุน ุฃุณูุงุก ุงูุนูุงุตุฑ ุจุงูุนุฑุจูุฉ
- ุชูููู ุงูููุงุท ุญุณุจ ุงููุทุงูุงุช
- ุญุณุงุจ ุงูููุทุฉ ุงูููุงุฆูุฉ ูุน ุงูุญุฏ ุงูุฃูุตู 10

**ุงูููุฏ ุงูุฃุณุงุณู:**
```javascript
app.get('/api/sections/:sectionId/assessment-grid.pdf', async (req, res) => {
  const PDFDocument = require('pdfkit');
  const doc = new PDFDocument({ bufferPages: true });
  // ุงูุจูุงูุงุช ุงูููุณูุฉ ูุน ุงูุนูุงุตุฑ ุงููููุงุณุฉ ุฅูู 0-10
});
```

### 3. ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ โ
**ุงูููุชุจุงุช ุงููุซุจุชุฉ:**
- `pdfkit@0.17.2` - ูุฅูุดุงุก ูููุงุช PDF ุจุฏุนู ุงูุนุฑุจูุฉ
- `exceljs@4.4.0` - ูุชุตุฏูุฑ Excel (ูุญุฏูุซ)

**ุฃูุฑ ุงูุชุซุจูุช:**
```bash
npm install pdfkit exceljs
```

### 4. ูููู React ููุนุฑุถ RTL โ
**ุงูููู:** `src/components/assessment/AssessmentGridRTL.tsx`

**ุงูููุฒุงุช:**
- โจ ุชุฎุทูุท ูู ุงููููู ุฅูู ุงููุณุงุฑ (RTL) ูุงูู
- ๐ ุฌุฏูู ูุน 7 ุฃุนูุฏุฉ ุญุณุจ ุงููุชุทูุจุงุช:
  1. ุฑูู ูู ุงููุณู
  2. ุงูุฑูุฒ (pathwayNumber)
  3. ุงูุงุณู ุงูุดุฎุตู (firstName)
  4. ุงูุงุณู ุงูุนุงุฆูู (lastName)
  5. ุขุฎุฑ ุชูููู (latestAssessmentDate)
  6. ุนูุงุตุฑ ุงูุชูููู (ูุชุบูุฑ ุญุณุจ ุงููุณู)
  7. ุงูููุทุฉ ุงูููุงุฆูุฉ (finalScore 0-10)

- ๐จ ูุธุงู ุชูููู ูุชูุฏู:
  - ุฃุฎุถุฑ (9-10): ููุชุงุฒ โ
  - ุจุฑุชูุงูู ูุงุชุญ (7-9): ุฌูุฏ ุฌุฏุงู ๐
  - ุจุฑุชูุงูู (5-7): ุฌูุฏ ๐
  - ุฃุญูุฑ (<5): ุถุนูู โ๏ธ

- โฌ๏ธ ุฃุฒุฑุงุฑ ุงูุชุญููู:
  - ๐ ุชุญููู Excel (xlsx)
  - ๐ ุชุญููู PDF
  - ูุน ุชุฃููุฏ ูุจู ุงูุชุญููู

- ๐ฑ ูุชุฌุงูุจ ุงูุญุฌู (Responsive)
- โฟ ุฏุนู ุงููุตูู (Accessibility)

**ุงูุฃุนูุฏุฉ ุงูุฏููุงููููุฉ:**
- ูุชู ุงุณุชุฎุฑุงุฌ ุฃุณูุงุก ุงูุนูุงุตุฑ ุชููุงุฆูุงู ูู ุงูุจูุงูุงุช
- ุชุฑุฌูุฉ ุนุฑุจูุฉ ุชููุงุฆูุฉ:
  - `attendance` โ ุงูุญุถูุฑ
  - `homework` โ ุงููุงุฌุจ
  - `notebook` โ ุงูุฏูุชุฑ
  - `behavior` โ ุงูุณููู
  - ุฅูุฎ...

### 5. ุงูุชูุงูู ูุน ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุทูุงุจ โ
**ุงูููู:** `src/pages/StudentManagement.tsx`

**ุงูุชุนุฏููุงุช:**
- ุงุณุชูุฑุงุฏ ุงููููู ุงูุฌุฏูุฏ: `AssessmentGridRTL`
- ุฅุถุงูุฉ ุงูุฌุฒุก ุงููุดุฑูุท:
```tsx
{currentSection && (
  <Box sx={{ mt: 5 }}>
    <AssessmentGridRTL sectionId={currentSection.id} />
  </Box>
)}
```
- ูุธูุฑ ููุท ุนูุฏ ุงุฎุชูุงุฑ ูุณู ูุญุฏุฏ
- ููุถุน ุงุณุชุฑุงุชูุฌู: ุฃุณูู ุฌุฏูู ุงูุทูุงุจ ูููู ุฒุฑ "ุงูุนูุฏุฉ ููุฃุนูู"

---

## ๐ API Endpoints

### 1. ุงูุญุตูู ุนูู ุดุจูุฉ ุงูุชูููู (JSON)
```
GET /api/sections/:sectionId/assessment-grid
```
**ุงูุฑุฏ:**
```json
{
  "sectionId": "123",
  "grid": [
    {
      "studentId": 456,
      "familyName": "ูุญูุฏ",
      "fullName": "ุฃุญูุฏ ูุญูุฏ",
      "pathwayNumber": "A1",
      "classOrder": 1,
      "latestAssessmentDate": "2025-11-04T10:30:00Z",
      "elementScores": {
        "attendance": 9.5,
        "homework": 8.2,
        "notebook": 8.8
      },
      "finalScore": 8.83
    }
  ],
  "generatedAt": "2025-11-04T14:22:15Z"
}
```

### 2. ุชุตุฏูุฑ Excel
```
GET /api/sections/:sectionId/assessment-grid.xlsx
```
- ูุชู ุงูุชูุฒูู ูุจุงุดุฑุฉ ูููู Excel
- ุฑุคูุณ ุจุงูุนุฑุจูุฉ
- ุฃุฑูุงู ูููุงุณุฉ ุฅูู 0-10

### 3. ุชุตุฏูุฑ PDF (ุฌุฏูุฏ!)
```
GET /api/sections/:sectionId/assessment-grid.pdf
```
- ูุชู ุงูุชูุฒูู ูุจุงุดุฑุฉ ูููู PDF
- ุฏุนู ูุงูู ููุนุฑุจูุฉ ูRTL
- ุฌุฏูู ููุณู ููุงุจู ููุทุจุงุนุฉ

---

## ๐ ููุทู ุงููููุงุณ ุงูุฑูุงุถู

### ุงูุตูุบุฉ ุงููุณุชุฎุฏูุฉ:

#### 1. ุชุทุจูุน ุงููููุฉ ุงูุฎุงู:
```
normalizeTo10(value):
  if value โค 1: return value ร 10
  if value โค 10: return value
  if value โค 100: return (value / 100) ร 10
  else: return clamp(value, 0, 10)
```

#### 2. ุญุณุงุจ ูุนุงูู ุงูุชุญุฌูู:
```
maxPerKey[k] = MAX(normalizeTo10(scores[k])) ููู ุนูุตุฑ k
sumMax = SUM(maxPerKey[k])
scaleFactor = 10 / sumMax
```

#### 3. ุชุทุจูู ุงูุชุญุฌูู:
```
elementScores[k] = normalizeTo10(scores[k]) ร scaleFactor
finalScore = MIN(10, SUM(elementScores[k]))
```

**ูุซุงู ุนููู:**
- ูุฏููุง 3 ุนูุงุตุฑ: ุงูุญุถูุฑุ ุงููุงุฌุจุ ุงูุฏูุชุฑ
- ุงูููู ุงููุตูู: 5ุ 6ุ 4
- sumMax = 15
- scaleFactor = 10 / 15 = 0.667
- ุงูููุงุท ุงููููุงุณุฉ: 3.33 + 4 + 2.67 = 10 โ

---

## ๐จ ุชูุงุตูู ุงููุงุฌูุฉ

### ุนููุงู ุงูุฌุฒุก:
```
ุดุจูุฉ ุงูุชูููู - ุฌููุน ุงูุทูุงุจ (N)
```

### ุฃุฒุฑุงุฑ ุงูุชุญููู:
```
[๐ ุชุญููู Excel]  [๐ ุชุญููู PDF]
```

### ุชุฑุชูุจ ุงูุฃุนูุฏุฉ (RTL):
```
ุงูููุทุฉ | ุงูุนูุงุตุฑ... | ุขุฎุฑ ุชูููู | ุงูุงุณู ุงูุนุงุฆูู | ุงูุงุณู ุงูุดุฎุตู | ุงูุฑูุฒ | ุงูุฑูู
ุงูููุงุฆูุฉ
```

### ุงูุชูุณูู ุงูุจุตุฑู:
- ุตู ุงูุนูุงููู: ุฃุฒุฑู (#2196f3) ูุน ูุต ุฃุจูุถ
- ุตููู ุงูุจูุงูุงุช: ุชูุงูุจ ุจูู ุฃุจูุถ ููุงุชุญ (#f9f9f9)
- ุงูููุฒ ุนูุฏ ุงูุชูุฑูุฑ: ุฎูููุฉ ุฒุฑูุงุก ูุงุชุญุฉ (#f0f7ff)
- ุญูู ุงูููุทุฉ ุงูููุงุฆูุฉ: ููู ุฏููุงูููู + ุฎูููุฉ ูุงุชุญุฉ

---

## ๐ ูุซุงู ุนูู ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ

| ุงูุฑูู | ุงูุฑูุฒ | ุงูุงุณู ุงูุดุฎุตู | ุงูุงุณู ุงูุนุงุฆูู | ุขุฎุฑ ุชูููู | ุงูุญุถูุฑ | ุงููุงุฌุจ | ุงูุฏูุชุฑ | ุงูููุทุฉ ุงูููุงุฆูุฉ |
|------|------|------------|----------|----------|--------|-------|-------|----------------|
| 1 | A1 | ุฃุญูุฏ | ูุญูุฏ | 2025-11-04 | 9.5 | 8.2 | 8.8 | 8.83 |
| 2 | A2 | ูุงุทูุฉ | ุนูู | 2025-11-03 | 7.2 | 8.5 | 7.9 | 7.87 |
| 3 | A3 | ูุญููุฏ | ุญุณู | 2025-11-02 | 5.8 | 6.3 | 5.9 | 6.0 |

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูู ุฌูุฉ ุงููุณุชุฎุฏู:
1. ุงูุชูู ุฅูู ุตูุญุฉ "ุฅุฏุงุฑุฉ ุงูุทูุงุจ"
2. ุงุฎุชุฑ ูุณูุงู ูู ุงูุฎูุงุฑุงุช ุฃุนูู ุงูุตูุญุฉ
3. ุงูุชุธุฑ ููููุงู ูุชุญููู ุดุจูุฉ ุงูุชูููู
4. ุงุณุชุฎุฏู ุฃุฒุฑุงุฑ ุงูุชุญููู:
   - ๐ **Excel**: ูุญูู ุฌุฏูู ุชูุงุนูู ูุงุจู ููุชุนุฏูู
   - ๐ **PDF**: ููุดุฆ ุชูุฑูุฑ ูุงุจู ููุทุจุงุนุฉ

### ูู ุฌูุฉ ุงููุทูุฑ:

#### ุงุณุชุฏุนุงุก ุงูู API ูุจุงุดุฑุฉ:
```javascript
// ุงูุญุตูู ุนูู ุงูุจูุงูุงุช JSON
const response = await fetch('/api/sections/123/assessment-grid');
const data = await response.json();

// ุชุญููู Excel
window.open('/api/sections/123/assessment-grid.xlsx');

// ุชุญููู PDF
window.open('/api/sections/123/assessment-grid.pdf');
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ/ุงูุฌุฏูุฏุฉ

### ูููุงุช ูุนุฏูุฉ:
1. **backend/index.js** (1348 โ ~1500 ุณุทุฑ)
   - ุชุญุฏูุซ ุฏุงูุชู ุงูุชุทุจูุน (JSON ู Excel)
   - ุฅุถุงูุฉ endpoint PDF ุฌุฏูุฏ ูุงูู
   - ุชุญุฏูุซ ูุนุงููุงุช ุงูุชุญุฌูู

2. **src/pages/StudentManagement.tsx**
   - ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ ุงููููู
   - ุฅุถุงูุฉ ุฌุฒุก ุงูุนุฑุถ ุงูุดุฑุทู

3. **backend/package.json**
   - ุฅุถุงูุฉ `pdfkit@0.17.2`
   - ุชุญุฏูุซ `exceljs@4.4.0`

### ูููุงุช ุฌุฏูุฏุฉ:
1. **src/components/assessment/AssessmentGridRTL.tsx** (350+ ุณุทุฑ)
   - ูููู React ูุงูู ูุน ุฌููุน ุงูููุฒุงุช

---

## โ๏ธ ุงููุชุทูุจุงุช ุงูุชูููุฉ

### Node/npm:
- Express 5.1.0
- Sequelize 6.37.7
- pdfkit 0.17.2
- exceljs 4.4.0

### React/TypeScript:
- Material-UI (MUI)
- React 18+
- TypeScript 5+

---

## ๐ ุงูุฃูุงู

- โ ุญูู ุงูู sectionId ูุนุฑู ุงูู route parameters
- โ ูุง ุชูุฌุฏ ุนูููุงุช ุญุฐู/ุชุนุฏูู
- โ ูุง ุชุนุฏูู ุนูู DB ูุจุงุดุฑุฉ
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ

---

## ๐ ููุงุญุธุงุช ูุงูุฉ

1. **ุงููููุงุณ ุงูููุงุฆู:** 0-10 (ุชู ุงูุชุญุฏูุซ ูู 0-20)
2. **ุนูุงุตุฑ ุงูุชูููู:** ูุชู ุญุณุงุจูุง ุฏููุงููููุงู ูู ูู ูุณู
3. **ุงูุชุงุฑูุฎ:** ูุชู ุชุญูููู ุฅูู ุตูุบุฉ ุนุฑุจูุฉ (`ar-SA`)
4. **ุงูุฃููุงู:** ูุธุงู ุนูุงูุงุช ุจุฏููู (ุฃุฎุถุฑ = ุฌูุฏุ ุฃุญูุฑ = ุถุนูู)
5. **ุงูุงุณุชุฌุงุจุฉ:** ุงูุฌุฏูู ูุชููู ูุน ุญุฌู ุงูุดุงุดุฉ
6. **ุงููุบุฉ:** ุฏุนู ูุงูู ููุนุฑุจูุฉ ูุน RTL

---

## ๐ฏ ูุง ุชู ุฅูุฌุงุฒู ููุงุจู ุงููุชุทูุจุงุช

| ุงููุชุทูุจ | ุงูุญุงูุฉ | ุงูููุงุญุธุงุช |
|--------|--------|----------|
| ุชุญุฏูุซ ุงููููุงุณ ุฅูู 0-10 | โ ููุฌุฒ | ุฌููุน ุงูู endpoints ูุญุฏุซุฉ |
| ุฏุนู RTL ุงููุงูู | โ ููุฌุฒ | ูู ุงููููู ุฅูู ุงููุณุงุฑ |
| ุฅุฒุงูุฉ ุนููุฏ ุงูู ID | โ ููุฌุฒ | ูุนุฑุถ ููุท classOrder |
| ุชุฑุชูุจ ุงูุฃุนูุฏุฉ | โ ููุฌุฒ | classOrder, pathway, firstName, lastName, date, elements, finalScore |
| ุชุญููู Excel | โ ููุฌุฒ | ูุน ุฃุฒุฑุงุฑ ุชุญููู |
| ุชุญููู PDF | โ ููุฌุฒ | ูุน ุฏุนู ุนุฑุจู ูุงูู |
| ุชูุงูู ูุน StudentManagement | โ ููุฌุฒ | ูุนุฑุถ ุนูุฏ ุงุฎุชูุงุฑ ูุณู |

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุฅููุงู ุฌููุน ูุชุทูุจุงุช ุงููุฑุญูุฉ ุจูุฌุงุญ:
- โ ูุธุงู ุงูุชูููู ูุนูู ุจูููุงุณ 0-10
- โ ุงููุงุฌูุฉ ูุฏุนููุฉ ุจู RTL ุจุงููุงูู
- โ ุชุตุฏูุฑ ุฅูู Excel ู PDF
- โ ุชูุงูู ุณูุณ ูุน ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู ุงูููุทู ุงูุญุณุงุจู

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู!** ๐
