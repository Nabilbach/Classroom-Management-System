# Maintenance Scripts - ุฏููู ุงูุณูุฑูุจุชุงุช

## ๐จ ุชุญุฐูุฑ: ุณูุฑูุจุชุงุช ุตูุงูุฉ ุฎุทุฑุฉ

ูุฐุง ุงููุฌูุฏ ูุญุชูู ุนูู ุณูุฑูุจุชุงุช ุตูุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช. ุฌููุนูุง ูุญููุฉ ุจุฃูุธูุฉ ุฃูุงู ูุชุนุฏุฏุฉ.

### ุงูุณูุฑูุจุชุงุช ุงููุชุงุญุฉ

#### 1. `reset_db.js` - ๐ด ุฎุทุฑ ุฌุฏุงู
**ุงููุธููุฉ:** ุญุฐู ูุงูู ููุงุนุฏุฉ ุงูุจูุงูุงุช ูุฅุนุงุฏุฉ ุฅูุดุงุฆูุง

**ุงูุญูุงูุฉ:**
- ูุทูุจ ูุชุบูุฑ `ALLOW_DATABASE_RESET=true`
- ูููุน ุงูุชุดุบูู ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ
- ูุชุญูู ูู ูุฌูุฏ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุญุฏูุซุฉ (< 24 ุณุงุนุฉ)
- ูุทูุจ 4 ุชุฃููุฏุงุช ูุฏููุฉ
- ููุชุธุฑ 10 ุซูุงูู ูุจู ุงูุชูููุฐ
- ูุณุฌู ุงูุนูููุฉ ูู `security_audit.log`

**ุงูุงุณุชุฎุฏุงู:**
```powershell
set ALLOW_DATABASE_RESET=true
node scripts/maintenance/reset_db.js
```

---

#### 2. `manual_migration.js` - ๐ ุนุงูู
**ุงููุธููุฉ:** ุชุฑุญูู ูุฏูู ููููู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุฅุถุงูุฉ/ุญุฐู ุฃุนูุฏุฉ)

**ุงูุญูุงูุฉ:**
- ูุทูุจ ูุชุบูุฑ `ALLOW_PRODUCTION_MIGRATION=true` ููุฅูุชุงุฌ
- ููุดุฆ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ ูุจู ุงูุชุฑุญูู
- ูุณุฌู ุจุฏุงูุฉ ูููุงูุฉ ุงูุชุฑุญูู
- ูููุฑ ุฅุฑุดุงุฏุงุช ุงุณุชุนุงุฏุฉ ูู ุญุงูุฉ ุงููุดู

**ุงูุงุณุชุฎุฏุงู:**
```powershell
# ููุชุทููุฑ
node scripts/maintenance/manual_migration.js

# ููุฅูุชุงุฌ
set ALLOW_PRODUCTION_MIGRATION=true
node scripts/maintenance/manual_migration.js
```

---

#### 3. `repair_student_sections.js` - ๐ก ูุชูุณุท
**ุงููุธููุฉ:** ุฑุจุท ุงูุทูุงุจ ุจุฃูุณุงููู ูู ูููุงุช Excel

**ุงูุญูุงูุฉ:**
- ูุทูุจ ูุชุบูุฑ `ALLOW_SECTION_REPAIR=true` ููุฅูุชุงุฌ
- ููุดุฆ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ
- ูุทูุจ ุชุฃููุฏ ูุฏูู ูุจู ุงูุชูููุฐ
- ูุนุฑุถ ููุฎุต ุงูุชุบููุฑุงุช ุงููุฎุทุท ููุง

**ุงูุงุณุชุฎุฏุงู:**
```powershell
node scripts/maintenance/repair_student_sections.js
```

---

#### 4. `fix_schedule_days.js` - ๐ข ููุฎูุถ
**ุงููุธููุฉ:** ุชุญููู ุฃุณูุงุก ุงูุฃูุงู ูู ุงูุฅูุฌููุฒูุฉ ุฅูู ุงูุนุฑุจูุฉ

**ุงูุญูุงูุฉ:**
- ูุทูุจ ูุชุบูุฑ `ALLOW_SCHEDULE_FIX=true` ููุฅูุชุงุฌ
- ููุดุฆ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ
- ูุทูุจ ุชุฃููุฏ ูุฏูู
- ูุนุฑุถ ุนุฏุฏ ุงูุณุฌูุงุช ุงููุชุฃุซุฑุฉ

**ุงูุงุณุชุฎุฏุงู:**
```powershell
node scripts/maintenance/fix_schedule_days.js
```

---

## ๐ ูุจู ุชุดุบูู ุฃู ุณูุฑูุจุช

1. โ ุชุฃูุฏ ูู ูุฌูุฏ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุญุฏูุซุฉ
2. โ ุงุฎุชุจุฑ ูู ุจูุฆุฉ ุงูุชุทููุฑ ุฃููุงู
3. โ ุฃููู ุฌููุน ุงูุฎุฏูุงุช ุงููุชุตูุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
4. โ ุงูุฑุฃ ุงูุชุญุฐูุฑุงุช ูุงูุชุฃููุฏุงุช ุจุนูุงูุฉ
5. โ ูุฏูู ุฎุทุฉ ุงุณุชุนุงุฏุฉ ูู ุญุงูุฉ ุญุฏูุซ ูุดุงูู

## ๐ ูู ุญุงูุฉ ุงูุทูุงุฑุฆ

ุฅุฐุง ูุดู ุฃู ุณูุฑูุจุช:
1. ูุง ุชุฎู - ุฌููุน ุงูุณูุฑูุจุชุงุช ุชูุดุฆ ูุณุฎ ุงุญุชูุงุทูุฉ
2. ุงุจุญุซ ุนู ุขุฎุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุงููุฌูุฏ ุงูุฑุฆูุณู (ุชุจุฏุฃ ุจู `pre_`)
3. ุงุณุชุนุฏ ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุจูุณุฎูุง ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงููุฉ
4. ุชุญูู ูู ููู `security_audit.log` ููุนุฑูุฉ ูุง ุญุฏุซ

## ๐ ููุงุญุธุงุช

- ุฌููุน ุงูุณูุฑูุจุชุงุช ุชุณุชุฎุฏู ูุณุงุฑุงุช ูุณุจูุฉ ูู ูููุนูุง (`../../backend/models`)
- ุงูุณูุฑูุจุชุงุช `reset_db.js` ู `manual_migration.js` ูุงูุช ูุญููุฉ ูุณุจูุงู
- ุชูุช ุฅุถุงูุฉ ุญูุงูุฉ ูู `repair_student_sections.js` ู `fix_schedule_days.js`
- ููููู ุญุฐู ุงููุณุฎ ุงููุฏููุฉ ูู `backend/` ุจุนุฏ ุงูุชุฃูุฏ ูู ุนูู ุงููุณุฎ ุงูุฌุฏูุฏุฉ
